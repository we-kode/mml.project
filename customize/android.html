<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-customize/android">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Android App | My Media Lib</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://we-kode.github.io/mml.project/customize/android"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Android App | My Media Lib"><meta data-rh="true" name="description" content="You can customize your app by color title icon. You can do it manually, please refer to the offical docu. The guide will show an automated process with github actions."><meta data-rh="true" property="og:description" content="You can customize your app by color title icon. You can do it manually, please refer to the offical docu. The guide will show an automated process with github actions."><link data-rh="true" rel="icon" href="/mml.project/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://we-kode.github.io/mml.project/customize/android"><link data-rh="true" rel="alternate" href="https://we-kode.github.io/mml.project/customize/android" hreflang="en"><link data-rh="true" rel="alternate" href="https://we-kode.github.io/mml.project/customize/android" hreflang="x-default"><link rel="stylesheet" href="/mml.project/assets/css/styles.4e4bd6bb.css">
<link rel="preload" href="/mml.project/assets/js/runtime~main.7d9f9e45.js" as="script">
<link rel="preload" href="/mml.project/assets/js/main.0c50bbd9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mml.project/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mml.project/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/orgs/we-kode/projects/1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Board<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/we-kode/mml.project/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/we-kode?q=mml.&amp;type=all&amp;language=&amp;sort=" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mml.project/">Project description</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/mml.project/category/setup">Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/mml.project/category/customization">Customization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Customization&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mml.project/customize/administration-app">Administration App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mml.project/customize/android">Android App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mml.project/customize/ios">iOS App</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/mml.project/category/concepts">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mml.project/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mml.project/contribution">Contribution</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mml.project/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/mml.project/category/customization"><span itemprop="name">Customization</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Android App</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Android App</h1><p>You can customize your app by color title icon. You can do it manually, please refer to the offical docu. The guide will show an automated process with github actions. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="customize">Customize<a class="hash-link" href="#customize" title="Direct link to heading">​</a></h2><p>download or fork
copy the _content folder to config annd
Chnage the content in the config folder
icons
color schema
titles and bundle id in the config file</p><p>run ./customize script (only on ubuntu)</p><p>copy the ./mml.administration-app fodler to the os you will build the app for and build it from source.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-action-workflow">Github Action Workflow<a class="hash-link" href="#github-action-workflow" title="Direct link to heading">​</a></h2><p>All the steps above can be done with github actions</p><p>cretae a fork of the mml.app repo
customize
create workflows for lsiten on new releases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="listen-to-release-tags">Listen to release tags<a class="hash-link" href="#listen-to-release-tags" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name: Sync fork with upstream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  schedule:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - cron:  &quot;0 0 1/7 * *&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  workflow_dispatch:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jobs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repo-sync:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - uses: actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        token: ${{ secrets.SYNC_PAT }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: repo-sync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      uses: repo-sync/github-sync@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        source_repo: &quot;https://github.com/we-kode/mml.app&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        source_branch: &quot;master&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        destination_branch: &quot;master&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        github_token: ${{ secrets.SYNC_PAT }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sync_tags: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - uses: oprypin/find-latest-tag@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id: latest-tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         repository: &lt;your-user-name&gt;/mml.app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          tag=${{ steps.latest-tag.outputs.tag }}-mml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          git config user.name &quot;${GITHUB_ACTOR}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          git config user.email &quot;${GITHUB_ACTOR}@users.noreply.github.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          git tag -a &quot;${tag}&quot; -m &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          git push origin &quot;${tag}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if: ${{ !endsWith(steps.latest-tag.outputs.tag,&#x27;-mml&#x27;) }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: create release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      uses: ncipollo/release-action@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if: ${{ !endsWith(steps.latest-tag.outputs.tag,&#x27;-mml&#x27;) }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tag: ${{ steps.latest-tag.outputs.tag }}-mml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        token: ${{ secrets.SYNC_PAT }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-the-app-and-release-it">Build the app and release it.<a class="hash-link" href="#build-the-app-and-release-it" title="Direct link to heading">​</a></h3><p>This workflow will cerate a aab release. If you want to create an apk please refere to the officialy docu.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name: Flutter CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Controls when the workflow will run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  push:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;[0-9]+.[0-9]+.[0-9]+-mml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jobs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prepare:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Runs a set of commands using the runners shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Customizing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          version=&quot;${{ github.ref_name }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ver_dump=$(echo &quot;${version/-ecg/&#x27;&#x27;}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          chmod +x customize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ./customize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          sed -i -E &quot;s/       versionName flutterVersionName/       versionName \&quot;$ver_dump\&quot;/&quot; &quot;./mml.app/android/app/build.gradle&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          sed -i -E &quot;s/        versionCode flutterVersionCode.toInteger\(\)/        versionCode \&quot;${{github.run_number}}\&quot;.toInteger\(\)/&quot; &quot;./mml.app/android/app/build.gradle&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          sed -i -E &quot;s/version: [0-9]+.[0-9]+.[0-9]+\+[0-9]+/version: $ver_dump+${{github.run_number}}/&quot; &quot;./mml.app/pubspec.yaml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Artefact customized version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: actions/upload-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-Custom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          path: mml.app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build-android:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs: [prepare]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/download-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-Custom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/setup-java@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          distribution: &#x27;zulu&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          java-version: &#x27;11&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: subosito/flutter-action@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          channel: &#x27;stable&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Install project dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: flutter pub get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Generate intermediates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          flutter pub run build_runner build --delete-conflicting-outputs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          flutter gen-l10n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Write jks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: timheuer/base64-to-file@v1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          fileName: &#x27;upload-ecgm.jks&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          fileDir: &#x27;./android/app/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          encodedString: ${{ secrets.ANDROID_JKS }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Write key.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;storePassword=${{ secrets.ANDROID_JKS_PASS }}&quot; &gt;&gt; ./android/key.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;keyPassword=${{ secrets.ANDROID_JKS_PASS }}&quot; &gt;&gt; ./android/key.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;keyAlias=ecgm&quot; &gt;&gt; ./android/key.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;storeFile=upload-ecgm.jks&quot; &gt;&gt; ./android/key.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Build artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          flutter build appbundle --release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          rm ./android/app/upload-ecgm.jks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          rm ./android/key.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          mv build/app/outputs/bundle/release/app-release.aab build/app/outputs/bundle/release/ecgm-${{ github.ref_name }}.aab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Upload artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: actions/upload-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-Android</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          path: build/app/outputs/bundle/release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  release-android:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs: [build-android]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/download-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-Android</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Android Release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: softprops/action-gh-release@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if: startsWith(github.ref, &#x27;refs/tags/&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          files: ecgm-${{ github.ref_name }}.aab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build-ios:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: macos-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs: [prepare]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/download-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-Custom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: subosito/flutter-action@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          channel: &#x27;stable&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Install the Apple certificate and provisioning profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          P12_BASE64: ${{ secrets.P12_BASE64 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          P12_PASSWORD: ${{ secrets.P12_PASSWORD }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          PROVISION_PROFILE_BASE64: ${{ secrets.PROVISION_PROFILE_BASE64 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          PROVISION_PROFILE_UID: ${{ secrets.PROVISION_PROFILE_UID }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          TEAM_ID: ${{ secrets.APPLE_TEAM_ID }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          CODE_SIGN_IDENTITY: ${{ secrets.CODE_SIGN_IDENTITY }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # create variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          CERTIFICATE_PATH=$RUNNER_TEMP/build_certificate.p12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          PP_PATH=$RUNNER_TEMP/build_pp.mobileprovision</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          KEYCHAIN_PATH=$RUNNER_TEMP/app-signing.keychain-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # import certificate and provisioning profile from secrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo -n &quot;$P12_BASE64&quot; | base64 --decode --output $CERTIFICATE_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo -n &quot;$PROVISION_PROFILE_BASE64&quot; | base64 --decode --output $PP_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # create temporary keychain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          security create-keychain -p &quot;$P12_PASSWORD&quot; $KEYCHAIN_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          security set-keychain-settings -lut 21600 $KEYCHAIN_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          security unlock-keychain -p &quot;$P12_PASSWORD&quot; $KEYCHAIN_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # import certificate to keychain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          security import $CERTIFICATE_PATH -P &quot;$P12_PASSWORD&quot; -A -t cert -f pkcs12 -k $KEYCHAIN_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          security list-keychain -d user -s $KEYCHAIN_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # apply provisioning profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cp $PP_PATH ~/Library/MobileDevice/Provisioning\ Profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Install project dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: flutter pub get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Generate intermediates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          flutter pub run build_runner build --delete-conflicting-outputs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          flutter gen-l10n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Build Flutter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: flutter build ios --release --no-codesign</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Build resolve Swift dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: xcodebuild -resolvePackageDependencies -workspace ios/Runner.xcworkspace -scheme Runner -configuration Release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Build xArchive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          xcodebuild -workspace ios/Runner.xcworkspace -scheme Runner -configuration Release DEVELOPMENT_TEAM=$TEAM_ID -sdk &#x27;iphoneos&#x27; -destination &#x27;generic/platform=iOS&#x27; -archivePath build-output/ecgm-${{ github.ref_name }}.xcarchive PROVISIONING_PROFILE=$PROVISION_PROFILE_UID clean archive CODE_SIGN_IDENTITY=&quot;$CODE_SIGN_IDENTITY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Export ipa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;plist version=&quot;1.0&quot;&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;dict&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;key&gt;method&lt;/key&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;string&gt;app-store&lt;/string&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;key&gt;teamID&lt;/key&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;&lt;string&gt;${{ secrets.APPLE_TEAM_ID }}&lt;/string&gt;&quot; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;key&gt;signingStyle&lt;/key&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;string&gt;manual&lt;/string&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;key&gt;provisioningProfiles&lt;/key&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;dict&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;&lt;key&gt;de.ecg.medialib&lt;/key&gt;&quot; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &quot;&lt;string&gt;${{ secrets.PROVISION_PROFILE_UID }}&lt;/string&gt;&quot; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;/dict&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;/dict&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          echo &#x27;&lt;/plist&gt;&#x27; &gt;&gt; ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cat ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          xcodebuild -exportArchive -archivePath build-output/ecgm-${{ github.ref_name }}.xcarchive -exportPath build-output/ios -exportOptionsPlist ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          mv build-output/ios/mml_app.ipa build-output/ios/ecgm-${{ github.ref_name }}.ipa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Upload artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: actions/upload-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-iOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          path: build-output/ios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Clean up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if: ${{ always() }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          security delete-keychain $RUNNER_TEMP/app-signing.keychain-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          rm ~/Library/MobileDevice/Provisioning\ Profiles/build_pp.mobileprovision</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          rm ios/ExportOptions.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  release-ios:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs: [build-ios]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - uses: actions/download-artifact@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: ECG-Medialib-iOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: iOS Release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: softprops/action-gh-release@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if: startsWith(github.ref, &#x27;refs/tags/&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          files: ecgm-${{ github.ref_name }}.ipa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-build">Run build<a class="hash-link" href="#run-build" title="Direct link to heading">​</a></h3><p>snyc fork will in this example sync every week for a new reelase. You can start build manually by runnging the sync_frok action manually.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/mml.project/customize/administration-app"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Administration App</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mml.project/customize/ios"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">iOS App</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#customize" class="table-of-contents__link toc-highlight">Customize</a></li><li><a href="#github-action-workflow" class="table-of-contents__link toc-highlight">Github Action Workflow</a><ul><li><a href="#listen-to-release-tags" class="table-of-contents__link toc-highlight">Listen to release tags</a></li><li><a href="#build-the-app-and-release-it" class="table-of-contents__link toc-highlight">Build the app and release it.</a></li><li><a href="#run-build" class="table-of-contents__link toc-highlight">Run build</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 WeKoDe</div></div></div></footer></div>
<script src="/mml.project/assets/js/runtime~main.7d9f9e45.js"></script>
<script src="/mml.project/assets/js/main.0c50bbd9.js"></script>
</body>
</html>